# vim:fileencoding=utf-8:ft=conf
# Kitty configuration translated from wezterm config
# Based on /Users/pyrho/rc/wezterm/wezterm.lua

# Fonts - Matching wezterm font setup {{{
# BEGIN_KITTY_FONTS
font_family      family="Aporetic Sans Mono"
bold_font        auto
italic_font      auto
bold_italic_font auto
# END_KITTY_FONTS
# BEGIN_KITTY_SYMBOL_MAPS
symbol_map U+E000-U+F1AF0 IosevkaTerm Nerd Font
# END_KITTY_SYMBOL_MAPS

# Apple Color Emoji and Flog Symbols support (from wezterm config)
#symbol_map U+23FB-U+23FE,U+2665,U+26A1,U+2B58,U+E000-U+E00A,U+E0A0-U+E0A3,U+E0B0-U+E0C8,U+E0CA,U+E0CC-U+E0D2,U+E0D4,U+E200-U+E2A9,U+E300-U+E3E3,U+E5FA-U+E634,U+E700-U+E7C5,U+EA60-U+EBEB,U+F000-U+F2E0,U+F300-U+F32F,U+F400-U+F4A9,U+F500-U+F8FF Symbols Nerd Font
#symbol_map U+1F600-U+1F64F,U+1F300-U+1F5FF,U+1F680-U+1F6FF,U+1F1E0-U+1F1FF,U+2600-U+26FF,U+2700-U+27BF Apple Color Emoji

font_size 18.0
# }}}

# Window appearance - Matching wezterm style {{{
# Window padding matching wezterm (3 cells left/right, 2 cells top/bottom)
# Approximate cell-based padding: 3 cells ≈ 15-18pts, 2 cells ≈ 10-12pts
window_padding_width 15 15 12 12

# Window decorations matching wezterm (RESIZE only)
hide_window_decorations titlebar-only
macos_titlebar_color background

# Transparency and blur (matching wezterm)
background_opacity 0.95
background_blur 50

# Inactive pane dimming (matching wezterm)
inactive_text_alpha 0.8

window_border_width 1.0
draw_minimal_borders yes
# }}}

# Layout configuration {{{
enabled_layouts splits,stack,fat
# }}}

# Tab bar configuration {{{
tab_bar_edge bottom
tab_bar_style powerline
hide_tab_bar_if_only_one_tab yes
tab_bar_min_tabs 2
# }}}

# Performance settings {{{
repaint_delay 10
input_delay 3
sync_to_monitor yes
# }}}

# Advanced settings {{{
allow_remote_control yes
clipboard_control write-clipboard write-primary read-clipboard read-primary
shell .
close_on_child_death yes
listen_on unix:/tmp/mykitty
# }}}

# Keyboard shortcuts - Wezterm style {{{

# Set kitty_mod to cmd for macOS consistency
kitty_mod cmd

# Clear existing shortcuts to avoid conflicts
clear_all_shortcuts yes

# === LEADER KEY BINDINGS (Ctrl+A) ===
# Wezterm uses Ctrl+A as leader key with 1000ms timeout

# Pane splitting (matching wezterm leader bindings)
map ctrl+a>minus launch --location=hsplit --cwd=current
map ctrl+a>apostrophe  launch --location=vsplit --cwd=current

# Pane management
map ctrl+a>m toggle_layout stack
# Leader + s (pane select)
map ctrl+a>s focus_visible_window
map ctrl+a>w close_window
# Leader + Ctrl+A (send Ctrl+A)
map ctrl+a>ctrl+a send_text normal \x01

# Resize mode (Leader + r, then hjkl)
map ctrl+a>r>h resize_window narrower 3
map ctrl+a>r>j resize_window shorter 3
map ctrl+a>r>k resize_window taller 3
map ctrl+a>r>l resize_window wider 3

# Project/workspace management (placeholders - would need custom kittens)
# Leader + p (project picker placeholder)
map ctrl+a>p new_tab_with_cwd
# Leader + f (workspace fuzzy finder placeholder)
map ctrl+a>f show_last_command_output

# === CMD-BASED BINDINGS (matching wezterm Cmd shortcuts) ===

# Pane splitting with Cmd
# Cmd+d (vertical split)
map cmd+d launch --location=vsplit --cwd=current
# Cmd+Shift+d (horizontal split)
map cmd+shift+d launch --location=hsplit --cwd=current
map cmd+w close_window

# Configuration
# Cmd+comma (edit config)
map cmd+comma edit_config_file

# Quick select (matching wezterm Super+p and Super+e)
# Cmd+p (select path)
map cmd+p kitten hints --type path --program @
# Cmd+e (select URL)
map cmd+e kitten hints --type url

# === SMART SPLITS NAVIGATION (Ctrl + hjkl) ===
map ctrl+h neighboring_window left
map ctrl+j neighboring_window down  
map ctrl+k neighboring_window up
map ctrl+l neighboring_window right

# === SMART SPLITS RESIZING (Alt + hjkl) ===
map alt+h resize_window narrower 3
map alt+j resize_window shorter 3
map alt+k resize_window taller 3  
map alt+l resize_window wider 3

# === STANDARD KITTY BINDINGS ===

# Clipboard
map cmd+c copy_to_clipboard
map cmd+v paste_from_clipboard

# Font size
map cmd+equal increase_font_size
map cmd+minus decrease_font_size
map cmd+backspace restore_font_size

# Tabs
map cmd+t new_tab_with_cwd
map cmd+q close_tab
map cmd+right next_tab
map cmd+left previous_tab
map cmd+1 goto_tab 1
map cmd+2 goto_tab 2
map cmd+3 goto_tab 3
map cmd+4 goto_tab 4
map cmd+5 goto_tab 5
map cmd+6 goto_tab 6
map cmd+7 goto_tab 7
map cmd+8 goto_tab 8
map cmd+9 goto_tab 9

# Tab renaming (matching wezterm Ctrl+Shift+E)
map ctrl+shift+e set_tab_title

# Window movement
map cmd+shift+h move_window left
map cmd+shift+j move_window bottom
map cmd+shift+k move_window top
map cmd+shift+l move_window right

# Layout switching
map cmd+shift+1 goto_layout stack
map cmd+shift+2 goto_layout fat
map cmd+shift+3 goto_layout splits

# Special key sequences (matching wezterm)
# Shift+Enter sends ESC+Enter
map shift+enter send_text normal \x1b\r

# Zoom toggle
map cmd+f toggle_layout stack

# Scrolling
map cmd+j scroll_line_down
map cmd+k scroll_line_up
map cmd+page_up scroll_page_up
map cmd+page_down scroll_page_down
map cmd+home scroll_home
map cmd+end scroll_end

# Miscellaneous
map cmd+f11 toggle_fullscreen
map cmd+u input_unicode_character
map cmd+f2 edit_config_file
map cmd+escape new_window
map cmd+n new_os_window
map ctrl+cmd+, load_config_file

# }}}

# Tokyo Night color schemes (matching wezterm themes) {{{
# Uncomment one of these includes based on your preference:
# Dark theme (matching wezterm "Tokyo Night Moon")
# include tokyo-night-moon.conf
# Light theme (matching wezterm "Tokyo Night Day")
# include tokyo-night-day.conf

# Default colors if theme files not available
# These approximate the Tokyo Night Moon theme from wezterm
foreground #c8d3f5
background #222436
selection_foreground #222436
selection_background #828bb8
cursor #c8d3f5

# Split colors (matching wezterm)
active_border_color #828bb8
inactive_border_color #2f334d

# Tab colors (matching wezterm dark theme)
active_tab_foreground #828bb8
active_tab_background #1e2030
inactive_tab_foreground #828bb8  
inactive_tab_background #2f334d
# }}}

# Additional settings for wezterm compatibility {{{

# Process names to skip close confirmation (matching wezterm)
confirm_os_window_close 0

# Enable shell integration for better prompt detection
shell_integration enabled

# Mouse settings
# Wezterm had this commented out due to bugs
focus_follows_mouse no
copy_on_select no
mouse_hide_wait 3.0

map ctrl+j neighboring_window down
map ctrl+k neighboring_window up
map ctrl+h neighboring_window left
map ctrl+l neighboring_window right

# Unset the mapping to pass the keys to neovim
map --when-focus-on var:IS_NVIM ctrl+j
map --when-focus-on var:IS_NVIM ctrl+k
map --when-focus-on var:IS_NVIM ctrl+h
map --when-focus-on var:IS_NVIM ctrl+l

# the 3 here is the resize amount, adjust as needed
map alt+j kitten relative_resize.py down  3
map alt+k kitten relative_resize.py up    3
map alt+h kitten relative_resize.py left  3
map alt+l kitten relative_resize.py right 3

map --when-focus-on var:IS_NVIM alt+j
map --when-focus-on var:IS_NVIM alt+k
map --when-focus-on var:IS_NVIM alt+h
map --when-focus-on var:IS_NVIM alt+l

# Scrollback
scrollback_lines 10000

macos_option_as_alt left
# }}}
